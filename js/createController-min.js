angular.module("mss_app").controller("createController",["$scope","$location",function(e,t){$(".navbar .nav li").removeClass("active"),$("#addEventTab").addClass("active"),e.hasParams=!1,setTimeout(function(){$("#datepickerevent").datetimepicker({daysOfWeekDisabled:[0,2,3,4,5,6]})},3);var r=1;e.addLink=function(){r++;var e=document.getElementById("linkcontainer"),t=document.createElement("div");t.innerHTML='<label for="link'+r+'">Link '+r+':</label><input type="url" name="link'+r+'" class="form-control" id="link'+r+'"><label for="linkdes'+r+'">Description:</label><textarea class="form-control" rows="2" name="linkdes'+r+'" id="linkdes'+r+'"></textarea>',e.appendChild(t)},e.submitForm=function(){var e=new Date($("#date").val()),a={};a.date=e,a.topic=$("#topic").val(),a.description=$("#description").val(),a.presenter=$("#presenter").val(),a.links=[];for(var n=1;n<=r;){var o={};o.link=$("#link"+n.toString()).val(),o.description=$("#linkdes"+n.toString()).val(),o.link&&a.links.push(o),n++}var s=JSON.parse(localStorage.getItem("datejson")),l=JSON.parse(localStorage.getItem("presenterjson")),i=e.toLocaleDateString();s.hasOwnProperty(i)?s[i].push(a):(s[i]=[],s[i].push(a));var c={};c.topic=a.topic,c.date=a.date,l.hasOwnProperty(a.presenter.toLowerCase())?l[a.presenter.toLowerCase()].push(c):(l[a.presenter.toLowerCase()]=[],l[a.presenter.toLowerCase()].push(c)),localStorage.setItem("datejson",JSON.stringify(s)),localStorage.setItem("presenterjson",JSON.stringify(l)),console.log(s),console.log(l),t.path("/view/"+function(e){for(var t=e,r=0;r<e.length;r++)" "==e.charAt(r)&&(t=t.substring(0,r)+"+"+t.substring(r+1));return t}(a.presenter.toLowerCase())+"/"+i)}}]);