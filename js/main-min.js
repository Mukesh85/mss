angular.module("mss_app",["ngRoute"]).config(["$locationProvider","$routeProvider",function(e,t){e.hashPrefix(""),t.when("/",{templateUrl:"tableView.html",controller:"tableViewController"}).when("/listview",{templateUrl:"listView.html",controller:"listViewController"}).when("/create",{templateUrl:"create.html",controller:"createController"}).when("/create/:presenter/:month/:day/:year",{templateUrl:"create.html",controller:"editController"}).when("/view/:presenter/:month/:day/:year",{templateUrl:"view.html",controller:"viewController"}).otherwise({redirectTo:"/"})}]),angular.module("mss_app").controller("controller",["$scope",function(e){null===localStorage.getItem("datejson")&&(localStorage.clear(),e.data={},localStorage.setItem("datejson",JSON.stringify(e.data)),localStorage.setItem("presenterjson",JSON.stringify(e.data)))}]),angular.module("mss_app").controller("createController",["$scope","$location",function(e,t){$(".navbar .nav li").removeClass("active"),$("#addEventTab").addClass("active"),e.hasParams=!1,setTimeout(function(){$("#datepickerevent").datetimepicker({daysOfWeekDisabled:[0,2,3,4,5,6]})},3);var a=1;e.addLink=function(){a++;var e=document.getElementById("linkcontainer"),t=document.createElement("div");t.innerHTML='<label for="link'+a+'">Link '+a+':</label><input type="url" name="link'+a+'" class="form-control" id="link'+a+'"><label for="linkdes'+a+'">Description:</label><textarea class="form-control" rows="2" name="linkdes'+a+'" id="linkdes'+a+'"></textarea>',e.appendChild(t)},e.submitForm=function(){var e=new Date($("#date").val()),o={};o.date=e,o.topic=$("#topic").val(),o.description=$("#description").val(),o.presenter=$("#presenter").val(),o.links=[];for(var r=1;r<=a;){var n={};n.link=$("#link"+r.toString()).val(),n.description=$("#linkdes"+r.toString()).val(),n.link&&o.links.push(n),r++}var s=JSON.parse(localStorage.getItem("datejson")),l=JSON.parse(localStorage.getItem("presenterjson")),i=e.toLocaleDateString();s.hasOwnProperty(i)?s[i].push(o):(s[i]=[],s[i].push(o));var c={};c.topic=o.topic,c.date=o.date,l.hasOwnProperty(o.presenter.toLowerCase())?l[o.presenter.toLowerCase()].push(c):(l[o.presenter.toLowerCase()]=[],l[o.presenter.toLowerCase()].push(c)),localStorage.setItem("datejson",JSON.stringify(s)),localStorage.setItem("presenterjson",JSON.stringify(l)),console.log(s),console.log(l),t.path("/view/"+function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}(o.presenter.toLowerCase())+"/"+i)}}]),angular.module("mss_app").controller("editController",["$scope","$location","$routeParams",function(e,t,a){$(".navbar .nav li").removeClass("active"),e.hasParams=!0;var o=a.day,r=a.month,n=a.year,s=function(e){for(var t=e,a=0;a<e.length;a++)"+"==e.charAt(a)&&(t=t.substring(0,a)+" "+t.substring(a+1));return t}(a.presenter.toLowerCase()),l=r+"/"+o+"/"+n,i=JSON.parse(localStorage.getItem("datejson")),c=JSON.parse(localStorage.getItem("presenterjson"));e.check=!1,e.details={},console.log(l),i.hasOwnProperty(l)?(e.check=!0,i[l].forEach(function(t){t.presenter.toLowerCase()==s.toLowerCase()&&(e.check=!1,e.details=t)})):e.check=!0,setTimeout(function(){$("#datepickerevent").datetimepicker({defaultDate:new Date(e.details.date),daysOfWeekDisabled:[0,2,3,4,5,6]})},3),e.submitForm=function(){var a=new Date($("#date").val()),o=a.toLocaleDateString();e.details.date=a;var r=e.details.presenter.toLowerCase();if(o==l&&r==s)i[l].forEach(function(t){t.presenter.toLowerCase()==s&&(t=e.details)}),c[s].forEach(function(t){new Date(t.date).toLocaleDateString()==o&&(t.topic=e.details.topic,t.date=e.details.date)});else if(o==l&&r!=s){i[l].forEach(function(t){t.presenter.toLowerCase()==s&&(t=e.details)});var n=0;1==c[s].length?delete c[s]:c[s].forEach(function(e){new Date(e.date).toLocaleDateString()==l&&c[s].splice(n,1),n++}),(p={}).topic=e.details.topic,p.date=e.details.date,c.hasOwnProperty(r.toLowerCase())?c[r.toLowerCase()].push(p):(c[r.toLowerCase()]=[],c[r.toLowerCase()].push(p))}else if(o!=l&&r==s){c[s].forEach(function(t){new Date(t.date).toLocaleDateString()==l&&(t.topic=e.details.topic,t.date=e.details.date)});n=0;1==i[l].length?delete i[l]:i[l].forEach(function(e){e.presenter.toLowerCase()==s&&i[l].splice(n,1),n++}),i.hasOwnProperty(o)?i[o].push(e.details):(i[o]=[],i[o].push(e.details))}else{if(1==i[l].length)delete i[l];else{n=0;i[l].forEach(function(e){e.presenter.toLowerCase()==s&&i[l].splice(n,1),n++})}if(i.hasOwnProperty(o)?i[o].push(e.details):(i[o]=[],i[o].push(e.details)),1==c[s].length)delete c[s];else{n=0;c[s].forEach(function(e){new Date(e.date).toLocaleDateString()==l&&c[s].splice(n,1),n++})}var p;(p={}).topic=e.details.topic,p.date=e.details.date,c.hasOwnProperty(r.toLowerCase())?c[r.toLowerCase()].push(p):(c[r.toLowerCase()]=[],c[r.toLowerCase()].push(p))}l=o,s=r,localStorage.setItem("datejson",JSON.stringify(i)),localStorage.setItem("presenterjson",JSON.stringify(c)),t.path("/view/"+function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}(r)+"/"+o)}}]),angular.module("mss_app").controller("listViewController",["$scope",function(e){$(".navbar .nav li").removeClass("active"),$("#listViewTab").addClass("active"),e.type="date",setTimeout(function(){$("#datepickersearch").datetimepicker({daysOfWeekDisabled:[0,2,3,4,5,6],format:"M/D/YYYY"}),$("input[name='date']").val(""),$("input[type='radio']").change(function(){$("input[name='search']").val(""),e.presenterName="",$("input[name='date']").val("")})},3),e.searchNoData="Search something";var t,a,o=JSON.parse(localStorage.getItem("datejson")),r=JSON.parse(localStorage.getItem("presenterjson"));e.scopepresenterjson=[],e.presenterList=[],Object.keys(r).forEach(function(t){e.scopepresenterjson.push({presenter:t,data:r[t]}),e.presenterList.push(t)}),console.log(e.scopepresenterjson),console.log(e.presenterList),e.searchData=[],e.toCheckDate,e.search=function(){e.searchNoData="No search result for this input",e.searchData=[],"date"==e.type&&(e.toCheckDate=$("input[name='date']").val(),console.log(e.toCheckDate),o.hasOwnProperty(e.toCheckDate)&&(e.searchData=o[e.toCheckDate]))},e.deleteVarUpdate=function(e,o){console.log(e,o),t=e.toLowerCase(),a=o,$("#newModal").modal()},e.delete=function(){console.log(t,a);var n=0;1==o[a].length?delete o[a]:o[a].forEach(function(e){e.presenter.toLowerCase()==t&&o[a].splice(n,1),n++}),n=0,1==r[t.toLowerCase()].length?delete r[t.toLowerCase()]:r[t].forEach(function(e){new Date(e.date).toLocaleDateString()==a&&r[t].splice(n,1),n++}),console.log(o),console.log(r);var s=0;e.searchData.forEach(function(t){new Date(t.date).toLocaleDateString()==a&&e.searchData.splice(s,1),s++,console.log(t.date,a)}),localStorage.setItem("datejson",JSON.stringify(o)),localStorage.setItem("presenterjson",JSON.stringify(r))},e.removeSpace=function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}}]),angular.module("mss_app").controller("tableViewController",["$scope","$filter",function(e,t){$(".navbar .nav li").removeClass("active"),$("#tableViewTab").addClass("active"),e.tableData=JSON.parse(localStorage.getItem("datejson"));var a,o,r=JSON.parse(localStorage.getItem("presenterjson"));function n(e,t){return new Date(e[0][0].date).getTime()-new Date(t[0][0].date).getTime()}e.dateToday=new Date,e.sortedbyValueJSONArray=function(e){var t=[];for(var a in e)t.push([e[a],a]);return t.sort(n)}(e.tableData),e.changeFormat=function(e){var t=new Date(e).toDateString();return t=t.slice(4),console.log(t),t},e.deleteVarUpdate=function(e,t){console.log(e,t),a=e.toLowerCase(),o=t},e.delete=function(){console.log(a,o);var t=0;1==e.tableData[o].length?delete e.tableData[o]:e.tableData[o].forEach(function(r){r.presenter.toLowerCase()==a&&e.tableData[o].splice(t,1),t++}),t=0,1==r[a.toLowerCase()].length?delete r[a.toLowerCase()]:r[a.toLowerCase()].forEach(function(e){new Date(e.date).toLocaleDateString()==o&&r[a.toLowerCase()].splice(t,1),t++}),localStorage.setItem("datejson",JSON.stringify(e.tableData)),localStorage.setItem("presenterjson",JSON.stringify(r))},e.removeSpace=function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}}]),angular.module("mss_app").controller("viewController",["$scope","$location","$routeParams",function(e,t,a){$(".navbar .nav li").removeClass("active");var o=a.day,r=a.month,n=a.year,s=function(e){for(var t=e,a=0;a<e.length;a++)"+"==e.charAt(a)&&(t=t.substring(0,a)+" "+t.substring(a+1));return t}(a.presenter),l=r+"/"+o+"/"+n,i=JSON.parse(localStorage.getItem("datejson"));e.check=!1,e.details={},console.log(l),i.hasOwnProperty(l)?(e.check=!0,i[l].forEach(function(t){t.presenter.toLowerCase()==s.toLowerCase()&&(e.check=!1,e.details=t)})):e.check=!0,e.removeSpace=function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}}]);