angular.module("mss_app",["ngRoute"]).config(["$locationProvider","$routeProvider",function(e,t){e.hashPrefix(""),t.when("/",{templateUrl:"tableView.html",controller:"tableViewController"}).when("/listview",{templateUrl:"listView.html",controller:"listViewController"}).when("/create",{templateUrl:"create.html",controller:"createController"}).when("/create/:presenter/:month/:day/:year",{templateUrl:"create.html",controller:"editController"}).when("/view/:presenter/:month/:day/:year",{templateUrl:"view.html",controller:"viewController"}).otherwise({redirectTo:"/"})}]),angular.module("mss_app").controller("controller",["$scope",function(e){null===localStorage.getItem("datejson")&&(localStorage.clear(),e.data={},localStorage.setItem("datejson",JSON.stringify(e.data)),localStorage.setItem("presenterjson",JSON.stringify(e.data)))}]),angular.module("mss_app").controller("createController",["$scope","$location",function(e,t){$(".navbar .nav li").removeClass("active"),$("#addEventTab").addClass("active"),e.hasParams=!1,setTimeout(function(){$("#datepickerevent").datetimepicker({daysOfWeekDisabled:[0,2,3,4,5,6]})},3);var a=1;e.addLink=function(){a++;var e=document.getElementById("linkcontainer"),t=document.createElement("div");t.innerHTML='<label for="link'+a+'">Link '+a+':</label><input type="url" name="link'+a+'" class="form-control" id="link'+a+'"><label for="linkdes'+a+'">Description:</label><textarea class="form-control" rows="2" name="linkdes'+a+'" id="linkdes'+a+'"></textarea>',e.appendChild(t)},e.submitForm=function(){var e=new Date($("#date").val()),r={};r.date=e,r.topic=$("#topic").val(),r.description=$("#description").val(),r.presenter=$("#presenter").val(),r.links=[];for(var o=1;o<=a;){var n={};n.link=$("#link"+o.toString()).val(),n.description=$("#linkdes"+o.toString()).val(),n.link&&r.links.push(n),o++}var s=JSON.parse(localStorage.getItem("datejson")),l=JSON.parse(localStorage.getItem("presenterjson")),i=e.toLocaleDateString();s.hasOwnProperty(i)?s[i].push(r):(s[i]=[],s[i].push(r));var c={};c.topic=r.topic,c.date=r.date,l.hasOwnProperty(r.presenter.toLowerCase())?l[r.presenter.toLowerCase()].push(c):(l[r.presenter.toLowerCase()]=[],l[r.presenter.toLowerCase()].push(c)),localStorage.setItem("datejson",JSON.stringify(s)),localStorage.setItem("presenterjson",JSON.stringify(l)),console.log(s),console.log(l),t.path("/view/"+function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}(r.presenter.toLowerCase())+"/"+i)}}]),angular.module("mss_app").controller("editController",["$scope","$location","$routeParams",function(e,t,a){$(".navbar .nav li").removeClass("active"),e.hasParams=!0;var r=a.day,o=a.month,n=a.year,s=function(e){for(var t=e,a=0;a<e.length;a++)"+"==e.charAt(a)&&(t=t.substring(0,a)+" "+t.substring(a+1));return t}(a.presenter.toLowerCase()),l=o+"/"+r+"/"+n,i=JSON.parse(localStorage.getItem("datejson")),c=JSON.parse(localStorage.getItem("presenterjson"));e.check=!1,e.details={},console.log(l),i.hasOwnProperty(l)?(e.check=!0,i[l].forEach(function(t){t.presenter.toLowerCase()==s.toLowerCase()&&(e.check=!1,e.details=t)})):e.check=!0,setTimeout(function(){$("#datepickerevent").datetimepicker({defaultDate:new Date(e.details.date),daysOfWeekDisabled:[0,2,3,4,5,6]})},3),e.submitForm=function(){var a=new Date($("#date").val()),r=a.toLocaleDateString();e.details.date=a;var o=e.details.presenter.toLowerCase();if(r==l&&o==s)i[l].forEach(function(t){t.presenter.toLowerCase()==s&&(t=e.details)}),c[s].forEach(function(t){new Date(t.date).toLocaleDateString()==r&&(t.topic=e.details.topic,t.date=e.details.date)});else if(r==l&&o!=s){i[l].forEach(function(t){t.presenter.toLowerCase()==s&&(t=e.details)});var n=0;1==c[s].length?delete c[s]:c[s].forEach(function(e){new Date(e.date).toLocaleDateString()==l&&c[s].splice(n,1),n++}),(p={}).topic=e.details.topic,p.date=e.details.date,c.hasOwnProperty(o.toLowerCase())?c[o.toLowerCase()].push(p):(c[o.toLowerCase()]=[],c[o.toLowerCase()].push(p))}else if(r!=l&&o==s){c[s].forEach(function(t){new Date(t.date).toLocaleDateString()==l&&(t.topic=e.details.topic,t.date=e.details.date)});n=0;1==i[l].length?delete i[l]:i[l].forEach(function(e){e.presenter.toLowerCase()==s&&i[l].splice(n,1),n++}),i.hasOwnProperty(r)?i[r].push(e.details):(i[r]=[],i[r].push(e.details))}else{if(1==i[l].length)delete i[l];else{n=0;i[l].forEach(function(e){e.presenter.toLowerCase()==s&&i[l].splice(n,1),n++})}if(i.hasOwnProperty(r)?i[r].push(e.details):(i[r]=[],i[r].push(e.details)),1==c[s].length)delete c[s];else{n=0;c[s].forEach(function(e){new Date(e.date).toLocaleDateString()==l&&c[s].splice(n,1),n++})}var p;(p={}).topic=e.details.topic,p.date=e.details.date,c.hasOwnProperty(o.toLowerCase())?c[o.toLowerCase()].push(p):(c[o.toLowerCase()]=[],c[o.toLowerCase()].push(p))}l=r,s=o,localStorage.setItem("datejson",JSON.stringify(i)),localStorage.setItem("presenterjson",JSON.stringify(c)),t.path("/view/"+function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}(o)+"/"+r)}}]),angular.module("mss_app").controller("listViewController",["$scope",function(e){$(".navbar .nav li").removeClass("active"),$("#listViewTab").addClass("active"),e.type="date",setTimeout(function(){$("#datepickersearch").datetimepicker({daysOfWeekDisabled:[0,2,3,4,5,6],format:"M/D/YYYY"}),$("input[name='date']").val(""),$("input[type='radio']").change(function(){$("input[name='search']").val(""),e.presenterName="",$("input[name='date']").val("")})},3),e.searchNoData="Search something";var t,a,r=JSON.parse(localStorage.getItem("datejson")),o=JSON.parse(localStorage.getItem("presenterjson"));e.scopepresenterjson=[],e.presenterList=[],Object.keys(o).forEach(function(t){e.scopepresenterjson.push({presenter:t,data:o[t]}),e.presenterList.push(t)}),console.log(e.scopepresenterjson),console.log(e.presenterList),e.searchData=[],e.toCheckDate,e.search=function(){e.searchNoData="No search result for this input",e.searchData=[],"date"==e.type&&(e.toCheckDate=$("input[name='date']").val(),console.log(e.toCheckDate),r.hasOwnProperty(e.toCheckDate)&&(e.searchData=r[e.toCheckDate]))},e.deleteVarUpdate=function(e,r){console.log(e,r),t=e.toLowerCase(),a=r,$("#newModal").modal()},e.delete=function(){console.log(t,a);var n=0;1==r[a].length?delete r[a]:r[a].forEach(function(e){e.presenter.toLowerCase()==t&&r[a].splice(n,1),n++}),n=0,1==o[t.toLowerCase()].length?delete o[t.toLowerCase()]:o[t].forEach(function(e){new Date(e.date).toLocaleDateString()==a&&o[t].splice(n,1),n++}),console.log(r),console.log(e.searchData),console.log(o);var s=0;"presenter"==e.type&&e.searchData.forEach(function(t){new Date(t.date).toLocaleDateString()==a&&e.searchData.splice(s,1),s++,console.log(t.date,a)}),e.scopepresenterjson=[],e.presenterList=[],Object.keys(o).forEach(function(t){e.scopepresenterjson.push({presenter:t,data:o[t]}),e.presenterList.push(t)}),localStorage.setItem("datejson",JSON.stringify(r)),localStorage.setItem("presenterjson",JSON.stringify(o))},e.removeSpace=function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}}]),angular.module("mss_app").controller("tableViewController",["$scope","$filter",function(e,t){$(".navbar .nav li").removeClass("active"),$("#tableViewTab").addClass("active"),e.tableData=JSON.parse(localStorage.getItem("datejson"));var a,r,o=JSON.parse(localStorage.getItem("presenterjson"));function n(e,t){return new Date(e[0][0].date).getTime()-new Date(t[0][0].date).getTime()}function s(e){var t=[];for(var a in e)t.push([e[a],a]);return t.sort(n)}e.dateToday=new Date,e.sortedbyValueJSONArray=s(e.tableData),console.log(e.sortedbyValueJSONArray),e.changeFormat=function(e){var t=new Date(e).toDateString();return t=t.slice(4),console.log(t),t},e.deleteVarUpdate=function(e,t){console.log(e,t),a=e.toLowerCase(),r=t},e.delete=function(){console.log(a,r);var t=0;1==e.tableData[r].length?delete e.tableData[r]:e.tableData[r].forEach(function(o){o.presenter.toLowerCase()==a&&e.tableData[r].splice(t,1),t++}),t=0,1==o[a.toLowerCase()].length?delete o[a.toLowerCase()]:o[a.toLowerCase()].forEach(function(e){new Date(e.date).toLocaleDateString()==r&&o[a.toLowerCase()].splice(t,1),t++}),e.sortedbyValueJSONArray=s(e.tableData),localStorage.setItem("datejson",JSON.stringify(e.tableData)),localStorage.setItem("presenterjson",JSON.stringify(o))},e.removeSpace=function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}}]),angular.module("mss_app").controller("viewController",["$scope","$location","$routeParams",function(e,t,a){$(".navbar .nav li").removeClass("active");var r=a.day,o=a.month,n=a.year,s=function(e){for(var t=e,a=0;a<e.length;a++)"+"==e.charAt(a)&&(t=t.substring(0,a)+" "+t.substring(a+1));return t}(a.presenter),l=o+"/"+r+"/"+n,i=JSON.parse(localStorage.getItem("datejson"));e.check=!1,e.details={},console.log(l),i.hasOwnProperty(l)?(e.check=!0,i[l].forEach(function(t){t.presenter.toLowerCase()==s.toLowerCase()&&(e.check=!1,e.details=t)})):e.check=!0,e.removeSpace=function(e){for(var t=e,a=0;a<e.length;a++)" "==e.charAt(a)&&(t=t.substring(0,a)+"+"+t.substring(a+1));return t}}]);